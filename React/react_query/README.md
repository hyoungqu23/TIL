# React Query와 상태 관리

## 상태

주어진 시간에 대한 시스템, 즉, 문자열, 배열, 객체 등의 형태로 어플리케이션에 저장된 데이터를 나타내는 것으로, 언제든지 변경될 수 있다.

따라서, 개발자의 입장에서는 오너십을 가지고 관리해야 할 데이터라고 볼 수 있다.

UI/UX의 중요성이 높아지고, 프로덕트의 규모가 커질수록 FE에서 수행하는 역할이 늘어나게 된다. 따라서 관리하는 상태가 많아지게 됐다.

이렇게 상태가 많아지고, 시간에 따라 변화하므로 상태들의 조합들도 늘어나게 되면서 체계적으로 관리할 필요성이 높아졌다. 하지만 React에서는 단방향 바인딩 방식을 가지고 있기 때문에 Props Drilling 이슈 등을 야기했다. 그러므로 Redux, MobX, Recoil 등 여러 상태 관리 라이브러리 혹은 Context API 등을 활용해 이를 해결하고자 했다.

다만, 이러한 상태 관리 라이브러리를 사용하는 여러 레거시 코드들에서는 Store에서 전역 상태를 관리하기 보다 API 통신 코드가 많은 것을 여러 개발자들이 지적하고, 문제로 인식하고 있다. 이전 프로젝트를 진행할 때 팀원들이 작성한 Redux Store에도 포트폴리오나 로그인 정보 등에 관련된 API 통신을 하는 코드가 대부분이었다는 것을 보면, 전역 상태 관리와는 맞지 않는 것이 아닌가 하는 생각이 든다.

눈을 감고 전역 상태 관리라고 생각하면서 보더라도 반복되는 isFetching, isLoading, isError 등 API 관련 상태와 비슷한 구조의 API 통신 코드를 Store에 작성하면서 서버 값을 저장하는 것이 맞는가에 대해 다양한 개발자들이 고민했다고 한다.

## 서버에서 받아야하는 상태의 특성

- Client에서 제어하거나 소유되지 않은 원격의 공간에서 관리되고 유지되는 상태
- Fetching, Updating에 비동기 API가 필요한 상태
- 다른 사람들과 공유되는 것으로 사용자가 모르는 사이에 변경될 수 있는 상태
- 신경쓰지 않으면 잠재적으로 'out of date'가 될 가능성을 지닌 상태

이러한 특성을 가진 상태들은 사실상 FE에서는 일종의 캐시이다.
